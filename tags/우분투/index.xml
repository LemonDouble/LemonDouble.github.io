<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>우분투 on Lemon Blog</title><link>https://blog.lemondouble.com/tags/%EC%9A%B0%EB%B6%84%ED%88%AC/</link><description>Recent content in 우분투 on Lemon Blog</description><generator>Hugo -- gohugo.io</generator><language>ko</language><lastBuildDate>Wed, 18 Jan 2023 11:13:14 +0000</lastBuildDate><atom:link href="https://blog.lemondouble.com/tags/%EC%9A%B0%EB%B6%84%ED%88%AC/index.xml" rel="self" type="application/rss+xml"/><item><title>내가 보려고 올리는 라즈베리 파이 초기 세팅</title><link>https://blog.lemondouble.com/p/088bdb572b7dc509/</link><pubDate>Wed, 18 Jan 2023 11:13:14 +0000</pubDate><guid>https://blog.lemondouble.com/p/088bdb572b7dc509/</guid><description>&lt;img src="https://blog.lemondouble.com/p/088bdb572b7dc509/cover.png" alt="Featured image of post 내가 보려고 올리는 라즈베리 파이 초기 세팅" />&lt;p>라즈베리 파이나, 홈 서버를 굴리다 보면 의외로(?) 서버를 초기화해야 하는 경우가 많습니다.&lt;/p>
&lt;p>세팅을 잘못 해서 뭔가 잘 안 된다거나, 뭘 깔았는지도 모르게 뭐가 잔뜩 설치되어 있는 경우 같이요.&lt;/p>
&lt;p>그래서 라즈베리 파이를 초기화하면 해 줘야 하는 일련의 작업들이 있는데,&lt;/p>
&lt;p>문제가 이게 항상 까먹을 때 쯤 초기화를 해서 세팅할 때마다 한참 구글을 뒤져야 합니다. 그래서 그걸 좀 모아두려구요.&lt;/p>
&lt;hr>
&lt;p>&lt;code>아래 내용은 Raspberry PI + Ubuntu Server 기준입니다. 초기 로그인 패스워드는 ubuntu 입니다.&lt;/code>&lt;/p>
&lt;h3 id="1-ssh-접속-가능하게-하기">1. SSH 접속 가능하게 하기
&lt;/h3>&lt;ul>
&lt;li>HDMI 케이블 들고와서 꼽고 키보드 꼽는거 굉장히 귀찮습니다.&lt;/li>
&lt;li>부팅 디스크 구울때 ssh (확장자 없음) 이란 빈 파일을 하나 생성해 주면, 부팅시 ssh 접근이 가능하도록 설정됩니다. (기본은 막혀있음)&lt;/li>
&lt;li>파이를 랜선을 이용해 공유기에 꼽고, 공유기 관리 페이지 등으로 IP를 딴 다음 SSH 접속합니다. hostname은 ubuntu로 잡힙니다.&lt;/li>
&lt;/ul>
&lt;h3 id="2-ssh-로그인-설정">2. SSH 로그인 설정
&lt;/h3>&lt;ul>
&lt;li>SSH 로그인이 가능하게 ~/.ssh/authorized_keys 파일에 내 공개키를 추가해 줍시다.&lt;/li>
&lt;li>SSH 키가 없다면 &lt;code>SSH 키 로그인&lt;/code> 같은걸 구글에 쳐서 따라해 봅니다!&lt;/li>
&lt;/ul>
&lt;h3 id="3-패스워드-로그인-막기">3. 패스워드 로그인 막기
&lt;/h3>&lt;ul>
&lt;li>내부망에서만 열어둔 파이라면 보통 별 상관 없지만.. SSH Key가 있다면 패스워드 로그인은 어지간하면 막아놓는게 보안상 좋습니다.&lt;/li>
&lt;li>&lt;code>/etc/ssh/sshd_config&lt;/code> 에 들어가서 &lt;code>PasswordAuthentication no&lt;/code> 로 설정해 줍니다.&lt;/li>
&lt;li>&lt;code>/etc/ssh/sshd_config.d/50-cloud-init.conf&lt;/code> 에 들어가서도 &lt;code>PasswordAuthentication no&lt;/code> 로 설정해 줍니다.&lt;/li>
&lt;li>이후 &lt;code>sudo systemctl reload sshd&lt;/code> 로 ssh 서버를 재시작합니다.&lt;/li>
&lt;/ul>
&lt;h3 id="4-wifi-연결-선택">4. Wifi 연결 (선택)
&lt;/h3>&lt;ul>
&lt;li>랜선 꼽아서 쓸 거면 안 해도 됩니다. 저는 랜선 빼면 방이 지저분해져서 일단 와이파이 세팅을 합니다.&lt;/li>
&lt;li>&lt;code>/etc/netplan/50-cloud-init.yaml&lt;/code> 파일을 엽니다. (없으면 만듭니다.)&lt;/li>
&lt;li>아래 파일을 복사 붙여넣기 합니다. 아래 설정 파일은 SSID (와이파이 이름) = lemon, 패스워드는 lemon1234의 예시입니다.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># This file is generated from information provided by the datasource. Changes&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># to it will not persist across an instance reboot. To disable cloud-init&amp;#39;s&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># network configuration capabilities, write a file&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># network: {config: disabled}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">network&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ethernets&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">eth0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dhcp4&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">optional&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">wifis&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">wlan0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dhcp4&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">optional&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">access-points&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;lemon&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;lemon1234&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="5-hostname-설정">5. Hostname 설정
&lt;/h3>&lt;ul>
&lt;li>SSH 창에서 지금 뭐 건들고 있는지 안 보이면 불안합니다&amp;hellip;&lt;/li>
&lt;li>&lt;code>sudo hostnamectl set-hostname &amp;lt;호스트명&amp;gt;&lt;/code> 입력해서 호스트 이름도 알기 쉽게 바꿔줍니다.&lt;/li>
&lt;/ul>
&lt;h3 id="6-재부팅">6. 재부팅
&lt;/h3>&lt;ul>
&lt;li>&lt;code>sudo reboot&lt;/code>&lt;/li>
&lt;li>무선랜으로 재연결시 내부 IP가 바뀔 수도 있으니, 연결 안 되면 공유기 페이지 보고 내부 ip를 수정합니다.&lt;/li>
&lt;/ul></description></item></channel></rss>